
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>API &#8212; PyRoombaAdapter 0.1.0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="PyRoombaAdapter" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-pyroombaadapter">
<span id="api"></span><h1>API<a class="headerlink" href="#module-pyroombaadapter" title="Permalink to this headline">¶</a></h1>
<p>A Python adapter module for Roomba Open Interface</p>
<p>This module is based on the document: iRobot® Roomba 500 Open Interface (OI) Specification
- Link <a class="reference external" href="https://www.irobot.lv/uploaded_files/File/iRobot_Roomba_500_Open_Interface_Spec.pdf">https://www.irobot.lv/uploaded_files/File/iRobot_Roomba_500_Open_Interface_Spec.pdf</a></p>
<dl class="class">
<dt id="pyroombaadapter.PyRoombaAdapter">
<em class="property">class </em><code class="descclassname">pyroombaadapter.</code><code class="descname">PyRoombaAdapter</code><span class="sig-paren">(</span><em>port</em>, <em>bau_rate=115200</em>, <em>time_out_sec=1.0</em>, <em>wheel_span_mm=235.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyroombaadapter.html#PyRoombaAdapter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyroombaadapter.PyRoombaAdapter" title="Permalink to this definition">¶</a></dt>
<dd><p>Adapter class for Roomba Open Interface</p>
<p>The constructor connects serial port and change the mode to safe mode</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>port</strong> (<em>string</em>) – Serial port path</li>
<li><strong>bau_rate</strong> (<em>int</em>) – bau rate of serial connection (default=115200)</li>
<li><strong>time_out_sec</strong> (<em>float</em>) – read time out of serial connection [sec] (default=1.0)</li>
<li><strong>wheel_span_mm</strong> (<em>float</em>) – wheel span of Roomba [mm]  (default=235.0)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Examples:</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">PORT</span> <span class="o">=</span> <span class="s2">&quot;/dev/ttyUSB0&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span> <span class="o">=</span> <span class="n">PyRoombaAdapter</span><span class="p">(</span><span class="n">PORT</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="method">
<dt id="pyroombaadapter.PyRoombaAdapter.__del__">
<code class="descname">__del__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyroombaadapter.html#PyRoombaAdapter.__del__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyroombaadapter.PyRoombaAdapter.__del__" title="Permalink to this definition">¶</a></dt>
<dd><p>Destructor of PyRoombaAdapter class</p>
<p>The Destructor make Roomba move to passive mode and close serial connection</p>
</dd></dl>

<dl class="method">
<dt id="pyroombaadapter.PyRoombaAdapter.change_mode_to_full">
<code class="descname">change_mode_to_full</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyroombaadapter.html#PyRoombaAdapter.change_mode_to_full"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyroombaadapter.PyRoombaAdapter.change_mode_to_full" title="Permalink to this definition">¶</a></dt>
<dd><p>Change mode to full mode</p>
<p>Full mode turns off the cliff, wheel-drop and internal charger safety features.
In Full mode, Roomba executes any command that you send it, even if the internal charger is plugged in,
or command triggers a cliff or wheel drop condition.</p>
<ul class="simple">
<li>Available in modes: Passive, Safe, or Full</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="pyroombaadapter.PyRoombaAdapter.change_mode_to_passive">
<code class="descname">change_mode_to_passive</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyroombaadapter.html#PyRoombaAdapter.change_mode_to_passive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyroombaadapter.PyRoombaAdapter.change_mode_to_passive" title="Permalink to this definition">¶</a></dt>
<dd><p>Change mode to passive mode</p>
<p>Roomba beeps once to acknowledge it is starting from “off” mode.</p>
<ul class="simple">
<li>Available in modes: Passive, Safe, or Full</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="pyroombaadapter.PyRoombaAdapter.change_mode_to_safe">
<code class="descname">change_mode_to_safe</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyroombaadapter.html#PyRoombaAdapter.change_mode_to_safe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyroombaadapter.PyRoombaAdapter.change_mode_to_safe" title="Permalink to this definition">¶</a></dt>
<dd><p>Change mode to safe mode</p>
<p>Safe mode turns off all LEDs.
If a safety condition occurs, Roomba reverts automatically to Passive mode.</p>
<ul class="simple">
<li>Available in modes: Passive, Safe, or Full</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="pyroombaadapter.PyRoombaAdapter.move">
<code class="descname">move</code><span class="sig-paren">(</span><em>velocity</em>, <em>yaw_rate</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyroombaadapter.html#PyRoombaAdapter.move"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyroombaadapter.PyRoombaAdapter.move" title="Permalink to this definition">¶</a></dt>
<dd><p>control roomba at the velocity and the rotational speed (yaw rate)</p>
<dl class="docutils">
<dt>Note:</dt>
<dd>The Roomba keep a control command until receiving next command</dd>
</dl>
<ul class="simple">
<li>Available in modes: Safe or Full</li>
<li>Changes mode to: No Change</li>
<li><dl class="first docutils">
<dt>Special cases:</dt>
<dd><ul class="first last">
<li>Straight = 32768 or 32767 = hex 8000 or 7FFF</li>
<li>Turn in place clockwise = -1</li>
<li>Turn in place counter-clockwise = 1</li>
</ul>
</dd>
</dl>
</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>velocity</strong> (<em>float</em>) – velocity (m/sec)</li>
<li><strong>yaw_rate</strong> (<em>float</em>) – yaw rate (rad/sec)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Examples:</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PORT</span> <span class="o">=</span> <span class="s2">&quot;/dev/ttyUSB0&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span> <span class="o">=</span> <span class="n">PyRoombaAdapter</span><span class="p">(</span><span class="n">PORT</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">))</span> <span class="c1"># rotate to right side</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span> <span class="c1"># keep rotate</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span> <span class="c1"># move straight with 10cm/sec</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyroombaadapter.PyRoombaAdapter.send_buttons_cmd">
<code class="descname">send_buttons_cmd</code><span class="sig-paren">(</span><em>clean=False</em>, <em>spot=False</em>, <em>dock=False</em>, <em>minute=False</em>, <em>hour=False</em>, <em>day=False</em>, <em>schedule=False</em>, <em>clock=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyroombaadapter.html#PyRoombaAdapter.send_buttons_cmd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyroombaadapter.PyRoombaAdapter.send_buttons_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>send buttons command</p>
<p>This command lets you push Roomba’s buttons. The buttons will automatically release after 1/6th of a second.</p>
<dl class="docutils">
<dt>Note:</dt>
<dd><ul class="first last simple">
<li>This API doesn’t work on Roomba 690 Model</li>
</ul>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>clean</strong> (<em>bool</em>) – clean button on</li>
<li><strong>spot</strong> (<em>bool</em>) – spot button on</li>
<li><strong>dock</strong> (<em>bool</em>) – dock button on</li>
<li><strong>minute</strong> (<em>bool</em>) – minute button on</li>
<li><strong>hour</strong> (<em>bool</em>) – hour button on</li>
<li><strong>day</strong> (<em>bool</em>) – day button on</li>
<li><strong>schedule</strong> (<em>bool</em>) – schedule button on</li>
<li><strong>clock</strong> (<em>bool</em>) – clock button on</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyroombaadapter.PyRoombaAdapter.send_drive_cmd">
<code class="descname">send_drive_cmd</code><span class="sig-paren">(</span><em>roomba_mm_sec</em>, <em>roomba_radius_mm</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyroombaadapter.html#PyRoombaAdapter.send_drive_cmd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyroombaadapter.PyRoombaAdapter.send_drive_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>send drive command</p>
<p>This command controls Roomba’s drive wheels.
The radius is measured from the center of the turning circle to the center of Roomba.
A Drive command with a positive velocity and a positive radius makes Roomba drive forward while turning left.
A negative radius makes Roomba turn toward the right.
Special cases for the radius make Roomba turn in place or drive straight.
A negative velocity makes Roomba drive backward.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>roomba_mm_sec</strong> (<em>float</em>) – the average velocity of the drive wheels in millimeters per second (-500 – 500 mm/s)</li>
<li><strong>roomba_radius_mm</strong> (<em>float</em>) – the radius in millimeters at which Roomba will turn. (-2000 – 2000 mm)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Examples:</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">PORT</span> <span class="o">=</span> <span class="s2">&quot;/dev/ttyUSB0&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span> <span class="o">=</span> <span class="n">PyRoombaAdapter</span><span class="p">(</span><span class="n">PORT</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span><span class="o">.</span><span class="n">send_drive_cmd</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="o">-</span><span class="mi">1000</span><span class="p">)</span> <span class="c1"># back to the right side</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sleep</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span> <span class="c1"># keep 2 sec</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyroombaadapter.PyRoombaAdapter.send_drive_direct">
<code class="descname">send_drive_direct</code><span class="sig-paren">(</span><em>right_mm_sec</em>, <em>left_mm_sec</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyroombaadapter.html#PyRoombaAdapter.send_drive_direct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyroombaadapter.PyRoombaAdapter.send_drive_direct" title="Permalink to this definition">¶</a></dt>
<dd><p>send drive direct command</p>
<p>This command lets you control the forward and backward motion of Roomba’s drive wheels independently.
A positive velocity makes that wheel drive forward, while a negative velocity makes it drive backward.</p>
<ul class="simple">
<li>Available in modes: Safe or Full</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>right_mm_sec</strong> (<em>float</em>) – the velocity of the right drive wheels in millimeters per second (-500 – 500 mm/s)</li>
<li><strong>left_mm_sec</strong> (<em>float</em>) – the velocity of the left drive wheels in millimeters per second (-500 – 500 mm/s)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Examples:</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">PORT</span> <span class="o">=</span> <span class="s2">&quot;/dev/ttyUSB0&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span> <span class="o">=</span> <span class="n">PyRoombaAdapter</span><span class="p">(</span><span class="n">PORT</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span><span class="o">.</span><span class="n">send_drive_direct</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="c1"># move right forward</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sleep</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span> <span class="c1"># keep 2 sec</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyroombaadapter.PyRoombaAdapter.send_drive_pwm">
<code class="descname">send_drive_pwm</code><span class="sig-paren">(</span><em>right_pwm</em>, <em>left_pwm</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyroombaadapter.html#PyRoombaAdapter.send_drive_pwm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyroombaadapter.PyRoombaAdapter.send_drive_pwm" title="Permalink to this definition">¶</a></dt>
<dd><p>send drive pwm command</p>
<p>This command lets you control the forward and backward motion of Roomba’s drive wheels independently.
It takes four data bytes, which are interpreted as two 16-bit signed values using two’s complement.
A positive PWM makes that wheel drive forward, while a negative PWM makes it drive backward.</p>
<ul class="simple">
<li>Available in modes: Safe or Full</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>right_pwm</strong> (<em>int</em>) – Right wheel PWM (-255 – 255)</li>
<li><strong>left_pwm</strong> (<em>int</em>) – Left wheel PWM (-255 - 255)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Examples:</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">PORT</span> <span class="o">=</span> <span class="s2">&quot;/dev/ttyUSB0&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span> <span class="o">=</span> <span class="n">PyRoombaAdapter</span><span class="p">(</span><span class="n">PORT</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span><span class="o">.</span><span class="n">send_drive_pwm</span><span class="p">(</span><span class="o">-</span><span class="mi">200</span><span class="p">,</span> <span class="o">-</span><span class="mi">200</span><span class="p">)</span> <span class="c1"># move backward</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sleep</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span> <span class="c1"># keep 2 sec</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyroombaadapter.PyRoombaAdapter.send_moters_cmd">
<code class="descname">send_moters_cmd</code><span class="sig-paren">(</span><em>main_brush_on</em>, <em>main_brush_direction_is_ccw</em>, <em>side_brush_on</em>, <em>side_brush_direction_is_inward</em>, <em>vacuum_on</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyroombaadapter.html#PyRoombaAdapter.send_moters_cmd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyroombaadapter.PyRoombaAdapter.send_moters_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>send moters command</p>
<p>This command controls the motion of Roomba’s main brush, side brush, and vacuum independently.
Motor velocity cannot be controlled with this command, all motors will run at maximum speed when enabled.
The main brush and side brush can be run in either direction. The vacuum only runs forward.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>main_brush_on</strong> (<em>bool</em>) – main brush on or off</li>
<li><strong>main_brush_direction_is_ccw</strong> (<em>bool</em>) – main brush direction, clockwise or counter-clockwise(default)</li>
<li><strong>side_brush_on</strong> (<em>bool</em>) – side brush on or off</li>
<li><strong>side_brush_direction_is_inward</strong> (<em>bool</em>) – side brush direction, inward(default) or outward</li>
<li><strong>side_brush_on</strong> – side brush on or off</li>
<li><strong>vacuum_on</strong> (<em>bool</em>) – vacuum on or off</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Examples:</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">PORT</span> <span class="o">=</span> <span class="s2">&quot;/dev/ttyUSB0&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span> <span class="o">=</span> <span class="n">PyRoombaAdapter</span><span class="p">(</span><span class="n">PORT</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span><span class="o">.</span><span class="n">send_moters_cmd</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="c1"># side brush is on, and it rotates inward</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sleep</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span> <span class="c1"># keep 2 sec</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyroombaadapter.PyRoombaAdapter.send_play_cmd">
<code class="descname">send_play_cmd</code><span class="sig-paren">(</span><em>song_number</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyroombaadapter.html#PyRoombaAdapter.send_play_cmd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyroombaadapter.PyRoombaAdapter.send_play_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>send play command</p>
<p>This command lets you select a song to play from the songs added to Roomba using the Song command.
You must add one or more songs to Roomba using the Song command in order for the Play command to work.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>song_number</strong> (<em>int</em>) – (0-4)</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Examples:</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span> <span class="o">=</span> <span class="n">PyRoombaAdapter</span><span class="p">(</span><span class="s2">&quot;/dev/ttyUSB0&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># note names</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f4</span> <span class="o">=</span> <span class="mi">65</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a4</span> <span class="o">=</span> <span class="mi">69</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c5</span> <span class="o">=</span> <span class="mi">72</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># note lengths</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MEASURE</span> <span class="o">=</span> <span class="mi">160</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">HALF</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">MEASURE</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Q</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">MEASURE</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Ed</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">MEASURE</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">/</span> <span class="mi">16</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">MEASURE</span> <span class="o">/</span> <span class="mi">16</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span><span class="o">.</span><span class="n">send_song_cmd</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="p">[</span><span class="n">a4</span><span class="p">,</span> <span class="n">a4</span><span class="p">,</span> <span class="n">a4</span><span class="p">,</span> <span class="n">f4</span><span class="p">,</span> <span class="n">c5</span><span class="p">,</span> <span class="n">a4</span><span class="p">,</span> <span class="n">f4</span><span class="p">,</span> <span class="n">c5</span><span class="p">,</span> <span class="n">a4</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="p">[</span><span class="n">Q</span><span class="p">,</span> <span class="n">Q</span><span class="p">,</span> <span class="n">Q</span><span class="p">,</span> <span class="n">Ed</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">Q</span><span class="p">,</span> <span class="n">Ed</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">HALF</span><span class="p">])</span> <span class="c1"># set song</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span><span class="o">.</span><span class="n">send_play_cmd</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># play song</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sleep</span><span class="p">(</span><span class="mf">10.0</span><span class="p">)</span> <span class="c1"># keep playing</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyroombaadapter.PyRoombaAdapter.send_pwm_moters">
<code class="descname">send_pwm_moters</code><span class="sig-paren">(</span><em>main_brush_pwm</em>, <em>side_brush_pwm</em>, <em>vacuum_pwm</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyroombaadapter.html#PyRoombaAdapter.send_pwm_moters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyroombaadapter.PyRoombaAdapter.send_pwm_moters" title="Permalink to this definition">¶</a></dt>
<dd><p>send pwm moters</p>
<p>This command control the speed of Roomba’s main brush, side brush, and vacuum independently.
With each data byte, you specify the duty cycle for the low side driver (max 128).
For example, if you want to control a motor with 25% of battery voltage, choose a duty cycle of 128 * 25% = 32.
The main brush and side brush can be run in either direction.
The vacuum only runs forward. Positive speeds turn the motor in its default (cleaning) direction.
Default direction for the side brush is counterclockwise.
Default direction for the main brush/flapper is inward.</p>
<ul class="simple">
<li>Available in modes: Safe or Full</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>main_brush_pwm</strong> (<em>int</em>) – main brush PWM (-127 - 127)</li>
<li><strong>side_brush_pwm</strong> (<em>int</em>) – side brush PWM (-127 - 127)</li>
<li><strong>vacuum_pwm</strong> (<em>int</em>) – vacuum duty cycle (0 - 127)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Examples:</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span> <span class="o">=</span> <span class="n">PyRoombaAdapter</span><span class="p">(</span><span class="s2">&quot;/dev/ttyUSB0&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span><span class="o">.</span><span class="n">send_pwm_moters</span><span class="p">(</span><span class="o">-</span><span class="mi">55</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1"># main brush is 55% PWM to opposite direction</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sleep</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span> <span class="c1"># keep 2 sec</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyroombaadapter.PyRoombaAdapter.send_song_cmd">
<code class="descname">send_song_cmd</code><span class="sig-paren">(</span><em>song_number</em>, <em>song_length</em>, <em>note_number_list</em>, <em>note_duration_list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyroombaadapter.html#PyRoombaAdapter.send_song_cmd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyroombaadapter.PyRoombaAdapter.send_song_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Send song command</p>
<p>This command lets you specify up to four songs to the OI that you can play at a later time.
Each song is associated with a song number.
The Play command uses the song number to identify your song selection.
Each song can contain up to sixteen notes.
Each note is associated with a note number that uses MIDI note definitions and a duration
that is specified in fractions of a second.
The number of data bytes varies, depending on the length of the song specified.
A one note song is specified by four data bytes.
For each additional note within a song, add two data bytes.</p>
<ul class="simple">
<li>Available in modes: Passive, Safe, or Full</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>song_number</strong> (<em>int</em>) – (0-4) The song number associated with the specific song.
If you send a second Song command, using the same song number, the old song is overwritten.</li>
<li><strong>song_length</strong> (<em>int</em>) – (1-16) The length of the song, according to the number of musical notes within the song.</li>
<li><strong>note_number_list</strong> (<em>list</em>) – Note Number (31 – 127) The pitch of the musical note Roomba will play,
according to the MIDI note numbering scheme.
The lowest musical note that Roomba will play is Note #31.
Roomba considers all musical notes outside the range of 31 – 127 as rest notes,
and will make no sound during the duration of those notes.</li>
<li><strong>note_duration_list</strong> (<em>list</em>) – Note Duration (0 – 255) The duration of a musical note,
in increments of 1/64th of a second. Example: a half-second long
musical note has a duration value of 32.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Examples:</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span> <span class="o">=</span> <span class="n">PyRoombaAdapter</span><span class="p">(</span><span class="s2">&quot;/dev/ttyUSB0&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># note names</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f4</span> <span class="o">=</span> <span class="mi">65</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a4</span> <span class="o">=</span> <span class="mi">69</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c5</span> <span class="o">=</span> <span class="mi">72</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># note lengths</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MEASURE</span> <span class="o">=</span> <span class="mi">160</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">HALF</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">MEASURE</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Q</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">MEASURE</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Ed</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">MEASURE</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">/</span> <span class="mi">16</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">MEASURE</span> <span class="o">/</span> <span class="mi">16</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span><span class="o">.</span><span class="n">send_song_cmd</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="p">[</span><span class="n">a4</span><span class="p">,</span> <span class="n">a4</span><span class="p">,</span> <span class="n">a4</span><span class="p">,</span> <span class="n">f4</span><span class="p">,</span> <span class="n">c5</span><span class="p">,</span> <span class="n">a4</span><span class="p">,</span> <span class="n">f4</span><span class="p">,</span> <span class="n">c5</span><span class="p">,</span> <span class="n">a4</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="p">[</span><span class="n">Q</span><span class="p">,</span> <span class="n">Q</span><span class="p">,</span> <span class="n">Q</span><span class="p">,</span> <span class="n">Ed</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">Q</span><span class="p">,</span> <span class="n">Ed</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">HALF</span><span class="p">])</span> <span class="c1"># set song</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span><span class="o">.</span><span class="n">send_play_cmd</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># play song</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sleep</span><span class="p">(</span><span class="mf">10.0</span><span class="p">)</span> <span class="c1"># keep playing</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyroombaadapter.PyRoombaAdapter.start_cleaning">
<code class="descname">start_cleaning</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyroombaadapter.html#PyRoombaAdapter.start_cleaning"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyroombaadapter.PyRoombaAdapter.start_cleaning" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the default cleaning</p>
<ul class="simple">
<li>Available in modes: Passive, Safe, or Full</li>
<li>Changes mode to: Passive</li>
</ul>
<dl class="docutils">
<dt>Examples:</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">PORT</span> <span class="o">=</span> <span class="s2">&quot;/dev/ttyUSB0&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span> <span class="o">=</span> <span class="n">PyRoombaAdapter</span><span class="p">(</span><span class="n">PORT</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span><span class="o">.</span><span class="n">start_cleaning</span><span class="p">()</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyroombaadapter.PyRoombaAdapter.start_max_cleaning">
<code class="descname">start_max_cleaning</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyroombaadapter.html#PyRoombaAdapter.start_max_cleaning"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyroombaadapter.PyRoombaAdapter.start_max_cleaning" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the max cleaning</p>
<ul class="simple">
<li>Available in modes: Passive, Safe, or Full</li>
<li>Changes mode to: Passive</li>
</ul>
<dl class="docutils">
<dt>Examples:</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">PORT</span> <span class="o">=</span> <span class="s2">&quot;/dev/ttyUSB0&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span> <span class="o">=</span> <span class="n">PyRoombaAdapter</span><span class="p">(</span><span class="n">PORT</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span><span class="o">.</span><span class="n">start_max_cleaning</span><span class="p">()</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyroombaadapter.PyRoombaAdapter.start_seek_dock">
<code class="descname">start_seek_dock</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyroombaadapter.html#PyRoombaAdapter.start_seek_dock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyroombaadapter.PyRoombaAdapter.start_seek_dock" title="Permalink to this definition">¶</a></dt>
<dd><p>Start seek dock</p>
<ul class="simple">
<li>Available in modes: Passive, Safe, or Full</li>
<li>Changes mode to: Passive</li>
</ul>
<dl class="docutils">
<dt>Examples:</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">PORT</span> <span class="o">=</span> <span class="s2">&quot;/dev/ttyUSB0&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span> <span class="o">=</span> <span class="n">PyRoombaAdapter</span><span class="p">(</span><span class="n">PORT</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span><span class="o">.</span><span class="n">start_seek_dock</span><span class="p">()</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyroombaadapter.PyRoombaAdapter.start_spot_cleaning">
<code class="descname">start_spot_cleaning</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyroombaadapter.html#PyRoombaAdapter.start_spot_cleaning"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyroombaadapter.PyRoombaAdapter.start_spot_cleaning" title="Permalink to this definition">¶</a></dt>
<dd><p>Start spot cleaning</p>
<ul class="simple">
<li>Available in modes: Passive, Safe, or Full</li>
<li>Changes mode to: Passive</li>
</ul>
<dl class="docutils">
<dt>Examples:</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">PORT</span> <span class="o">=</span> <span class="s2">&quot;/dev/ttyUSB0&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span> <span class="o">=</span> <span class="n">PyRoombaAdapter</span><span class="p">(</span><span class="n">PORT</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span><span class="o">.</span><span class="n">start_spot_cleaning</span><span class="p">()</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyroombaadapter.PyRoombaAdapter.turn_off_power">
<code class="descname">turn_off_power</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyroombaadapter.html#PyRoombaAdapter.turn_off_power"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyroombaadapter.PyRoombaAdapter.turn_off_power" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn off power of Roomba</p>
<p>The mode change to passive mode.</p>
<ul class="simple">
<li>Available in modes: Passive, Safe, or Full</li>
</ul>
<dl class="docutils">
<dt>Examples:</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">PORT</span> <span class="o">=</span> <span class="s2">&quot;/dev/ttyUSB0&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span> <span class="o">=</span> <span class="n">PyRoombaAdapter</span><span class="p">(</span><span class="n">PORT</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span><span class="o">.</span><span class="n">turn_off_power</span><span class="p">()</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/icon.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="index.html">PyRoombaAdapter</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=AtsushiSakai&repo=PyRoombaAdapter&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">API</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/AtsushiSakai/PyRoombaAdapter/">GitHub</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">PyRoombaAdapter</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>


<h3 class="donation">Donate/support</h3>



<p>
<a class="badge" href="https://www.patreon.com/myenigma">
<img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate">
</a>
</p>





        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Atsushi Sakai.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/API.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/AtsushiSakai/PyRoombaAdapter" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>